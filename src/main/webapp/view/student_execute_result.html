<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>批改结果</title>

    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="this is my page">

    #include("_css.html")

</head>
<body>

#include("_navbar.html")


<div class="container-fluid">

    <div class="row">
        <div class="col-sm-3 col-md-2 sidebar">
            <ul class="nav nav-sidebar">
                #include("_sidebar.html")
            </ul>
        </div>
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
            <div class="row">
                <div class="col-md-12">
                    <div class="breadcrumb">
                        <li><a href="/info/classes">班级列表</a></li>
                        <li><a href="/info/assignments/#(assignment.classId)">作业列表</a></li>
                        <li><span>作业详情</span></li>
                    </div>
                </div>
            </div>

            #if(upload==null||upload.status==0)
            <label class="text-danger">作业未提交</label>
            #else if(upload.status==1)
            <label class="text-danger">作业未批改完成</label>
            #else if(upload.status==-1)
            <label class="text-danger">作业批改出错，请重新上传</label>
            #else
            <div class="col-sm-9">
                <label class="text-danger">最新批改时间：#(upload.evaluateDate.toString().substring(0, 19))</label>
            </div>
            <div class="col-sm-9">
                <label class="text-danger">总得分：#(executeResult.score)</label>
            </div>
            <div class="col-sm-9">
                <table class="table table-hover">
                    <thead>
                    <tr>
                        <th>题号</th>
                        <th>是否编译通过</th>
                        <th>测试用例得分</th>
                        <th>静态分析得分</th>
                    </tr>
                    </thead>
                    <tbody>
                    #for(x : executeResult.questionResultList)
                    <tr>
                        <td>#(x.questionNo)</td>
                        <td>
                            <div class="hidden">
                                <p style="margin-left: 20px;margin-right: 20px;margin-top: 5px">
                                    #(x.compileErrorInfo)
                                </p>
                            </div>
                            #if(!x.isCompilePass)<a title="点击查看编译错误"
                                                    class="compile-error"
                                                    data-toggle="tooltip"
                                                    data-placement="bottom">#end#if(x.isCompilePass)是#else否#end#if(!x.isCompilePass)</a>#end
                        </td>
                        <td>#(x.testCaseScore)</td>
                        <td>#(x.evaluateScore)</td>
                    </tr>
                    #end
                    </tbody>
                </table>
            </div>
            #end


        </div>
    </div>
</div>
</div>


#include("_js.html")

</body>
<script>

    $(function () {

        $('[data-toggle="tooltip"]').tooltip();

        $('.detail-info-btn').click(function () {
            $($(this).data('target')).modal('toggle');
        });


        $('.violation').click(function () {
            layer.open({
                type: 1,
                area: ['600px', '240px'], //宽高
                content: $(this).prev().html()
            });
        });

        $('.compile-error').click(function () {
            layer.open({
                type: 1,
                area: ['400px', '240px'], //宽高
                content: $(this).prev().html()
            });
        });

        $('.confirm-release-btn').click(function () {
            layer.confirm('是否确认发布吗？', {
                btn: ['确认', '取消']
            }, function (index, layero) {
                window.location.href = "/assignment/confirmRelease?assignmentId=#(assignment.assignmentId)";
            }, function (index) {
            });
        })
    });
</script>
</html>
