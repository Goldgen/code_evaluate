<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>批改结果</title>

    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="this is my page">

    #include("_css.html")

</head>
<body>

#include("_navbar.html")


<div class="container-fluid">

    <div class="row">
        <div class="col-sm-3 col-md-2 sidebar">
            <ul class="nav nav-sidebar">
                <li class="#if(userType==0)hidden#end"><a href="/assignment/detail/#(assignment.assignmentId)-test_case_edit">测试用例编辑</a></li>
                <li class="#if(userType==0)hidden#end"><a href="/assignment/detail/#(assignment.assignmentId)-code_upload">作业上传</a></li>
                <li class="active"><a href="/assignment/detail/#(assignment.assignmentId)-execute_result">批改结果查看</a>
                </li>
                <li class="#if(userType==0)hidden#end"><a href="/assignment/detail/#(assignment.assignmentId)-similarity_analysis">相似度分析</a></li>
            </ul>
        </div>
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
            <div class="row">
                <div class="col-md-12">
                    <div class="bread">
                        <a href="/class/list">班级列表</a>
                        &gt; <a href="/assignment/list/#(assignment.classId)">作业列表</a> &gt;
                        <span>作业详情</span>
                    </div>
                </div>
            </div>
            #if(userType==0)

            #if(assignment.assignmentStatus==3)
            <div class="col-sm-9">
                <label class="text-danger">最新批改时间：#(assignment.evaluateTime.toString().substring(0, 19))</label>
            </div>
            #include("_execute_result_table.html")
            #else
            <label class="text-danger">作业未发布</label>
            #end

            #else

            #if(assignment.assignmentStatus==0)
            <label class="text-danger">作业未提交</label>
            #else if(assignment.assignmentStatus==1)
            <label class="text-danger">作业未批改完成</label>
            #else
            <div class="col-sm-9">
                <label class="text-danger">最新批改时间：#(assignment.evaluateTime.toString().substring(0, 19))</label>
            </div>
            <div class="col-sm-3">
                <a class="btn btn-primary btn-sm" href="/assignment/allExcel?assignmentId=#(assignment.assignmentId)">导出EXCEL</a>
                #if(assignment.assignmentStatus==3)
                <label class="text-danger">已发布</label>
                #else
                <a class="btn btn-primary btn-sm confirm-release-btn">确认发布</a>
                #end
            </div>
            #include("_execute_result_table.html")
            #end

            #end


        </div>
    </div>
</div>
</div>


#include("_js.html")

</body>
<script>

    $(function () {

        $('[data-toggle="tooltip"]').tooltip();

        $('.detail-info-btn').click(function () {
            $($(this).data('target')).modal('toggle');
        });


        $('.violation').click(function () {
            layer.open({
                type: 1,
                area: ['600px', '240px'], //宽高
                content: $(this).prev().html()
            });
        });

        $('.compile-error').click(function () {
            layer.open({
                type: 1,
                area: ['400px', '240px'], //宽高
                content: $(this).prev().html()
            });
        });

        $('.confirm-release-btn').click(function () {
            layer.confirm('是否确认发布吗？', {
                btn: ['确认', '取消']
            }, function (index, layero) {
                window.location.href = "/assignment/confirmRelease?assignmentId=#(assignment.assignmentId)";
            }, function (index) {
            });
        })
    });
</script>
</html>
